import"./index-DmKw4XXH.js";/* empty css                    */import{d as Yt,e as Le,P as Wt,I as Oe,a as Xe,S as Jt,E as Ye}from"./el-card-gthh8NLS.js";import{b8 as We,b9 as Qt,s as Ue,m as Je,af as ge,aF as er,C as Y,a as $,ba as tr,f as x,j as S,h as E,b,b0 as rr,ab as nr,S as W,a6 as or,ay as Qe,ao as et,b4 as tt,ap as rt,aP as ar,aJ as ir,aI as lr,bb as sr,bc as ur,bd as fr,aZ as cr,be as pr,bf as dr,aR as hr,aG as yr,H as mr,aH as vr,c as re,bg as gr,bh as _r,ad as Re,bi as nt,aN as br,F as ot,x as at,q as it,aM as wr,A as Q,G as J,bj as Ur,bk as Sr,bl as Pr,az as xr,aj as Ce,bm as Er}from"./element-plus-D2VUXABr.js";import{A as kr,a as Or,_ as Rr,c as Cr}from"./_plugin-vue_export-helper-ySprrkWw.js";function ze(t){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(t)}function jr(t,e,r){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e,r){return e=pe(e),Lr(t,Me()?Reflect.construct(e,r||[],pe(t).constructor):e.apply(t,r))}function Lr(t,e){if(e&&(ze(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zr(t)}function zr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ce(t,e)}function Ie(t){var e=typeof Map=="function"?new Map:void 0;return Ie=function(n){if(n===null||!Dr(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,a)}function a(){return Fr(n,arguments,pe(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),ce(a,n)},Ie(t)}function Fr(t,e,r){if(Me())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var a=new(t.bind.apply(t,n));return r&&ce(a,r.prototype),a}function Me(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Me=function(){return!!t})()}function Dr(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function ce(t,e){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ce(t,e)}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pe(t)}var _e=(function(t){function e(r){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Ar(this,e),n=Tr(this,e,[r]),n.originalRequest=u,n.originalResponse=c,n.causingError=a,a!=null&&(r+=", caused by ".concat(a.toString())),u!=null){var w=u.getHeader("X-Request-ID")||"n/a",y=u.getMethod(),U=u.getURL(),R=c?c.getStatus():"n/a",z=c?c.getBody()||"":"n/a";r+=", originated from request (method: ".concat(y,", url: ").concat(U,", response code: ").concat(R,", response text: ").concat(z,", request id: ").concat(w,")")}return n.message=r,n}return Ir(e,t),jr(e)})(Ie(Error));function de(t){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function $r(t,e,r){return e&&Br(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nr(t){var e=Hr(t,"string");return de(e)=="symbol"?e:e+""}function Hr(t,e){if(de(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(de(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mr=(function(){function t(){qr(this,t)}return $r(t,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(r){return Promise.resolve([])}},{key:"removeUpload",value:function(r){return Promise.resolve()}},{key:"addUpload",value:function(r,n){return Promise.resolve(null)}}])})();const Ct="3.7.8",Gr=Ct,se=typeof Buffer=="function",lt=typeof TextDecoder=="function"?new TextDecoder:void 0,st=typeof TextEncoder=="function"?new TextEncoder:void 0,Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ue=Array.prototype.slice.call(Vr),be=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})(ue),Kr=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,q=String.fromCharCode.bind(String),ut=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),jt=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),At=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),Tt=t=>{let e,r,n,a,u="";const c=t.length%3;for(let w=0;w<t.length;){if((r=t.charCodeAt(w++))>255||(n=t.charCodeAt(w++))>255||(a=t.charCodeAt(w++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|a,u+=ue[e>>18&63]+ue[e>>12&63]+ue[e>>6&63]+ue[e&63]}return c?u.slice(0,c-3)+"===".substring(c):u},Ge=typeof btoa=="function"?t=>btoa(t):se?t=>Buffer.from(t,"binary").toString("base64"):Tt,Fe=se?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let n=0,a=t.length;n<a;n+=4096)r.push(q.apply(null,t.subarray(n,n+4096)));return Ge(r.join(""))},Se=(t,e=!1)=>e?jt(Fe(t)):Fe(t),Zr=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?q(192|e>>>6)+q(128|e&63):q(224|e>>>12&15)+q(128|e>>>6&63)+q(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return q(240|e>>>18&7)+q(128|e>>>12&63)+q(128|e>>>6&63)+q(128|e&63)}},Xr=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Lt=t=>t.replace(Xr,Zr),ft=se?t=>Buffer.from(t,"utf8").toString("base64"):st?t=>Fe(st.encode(t)):t=>Ge(Lt(t)),ie=(t,e=!1)=>e?jt(ft(t)):ft(t),ct=t=>ie(t,!0),Yr=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Wr=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return q((r>>>10)+55296)+q((r&1023)+56320);case 3:return q((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return q((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},zt=t=>t.replace(Yr,Wr),It=t=>{if(t=t.replace(/\s+/g,""),!Kr.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r,n,a=[];for(let u=0;u<t.length;)e=be[t.charAt(u++)]<<18|be[t.charAt(u++)]<<12|(r=be[t.charAt(u++)])<<6|(n=be[t.charAt(u++)]),r===64?a.push(q(e>>16&255)):n===64?a.push(q(e>>16&255,e>>8&255)):a.push(q(e>>16&255,e>>8&255,e&255));return a.join("")},Ve=typeof atob=="function"?t=>atob(At(t)):se?t=>Buffer.from(t,"base64").toString("binary"):It,Ft=se?t=>ut(Buffer.from(t,"base64")):t=>ut(Ve(t).split("").map(e=>e.charCodeAt(0))),Dt=t=>Ft(qt(t)),Jr=se?t=>Buffer.from(t,"base64").toString("utf8"):lt?t=>lt.decode(Ft(t)):t=>zt(Ve(t)),qt=t=>At(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),De=t=>Jr(qt(t)),Qr=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},Bt=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),$t=function(){const t=(e,r)=>Object.defineProperty(String.prototype,e,Bt(r));t("fromBase64",function(){return De(this)}),t("toBase64",function(e){return ie(this,e)}),t("toBase64URI",function(){return ie(this,!0)}),t("toBase64URL",function(){return ie(this,!0)}),t("toUint8Array",function(){return Dt(this)})},Nt=function(){const t=(e,r)=>Object.defineProperty(Uint8Array.prototype,e,Bt(r));t("toBase64",function(e){return Se(this,e)}),t("toBase64URI",function(){return Se(this,!0)}),t("toBase64URL",function(){return Se(this,!0)})},en=()=>{$t(),Nt()},tn={version:Ct,VERSION:Gr,atob:Ve,atobPolyfill:It,btoa:Ge,btoaPolyfill:Tt,fromBase64:De,toBase64:ie,encode:ie,encodeURI:ct,encodeURL:ct,utob:Lt,btou:zt,decode:De,isValid:Qr,fromUint8Array:Se,toUint8Array:Dt,extendString:$t,extendUint8Array:Nt,extendBuiltins:en};var je,pt;function rn(){return pt||(pt=1,je=function(e,r){if(r=r.split(":")[0],e=+e,!e)return!1;switch(r){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}),je}var we={},dt;function nn(){if(dt)return we;dt=1;var t=Object.prototype.hasOwnProperty,e;function r(c){try{return decodeURIComponent(c.replace(/\+/g," "))}catch{return null}}function n(c){try{return encodeURIComponent(c)}catch{return null}}function a(c){for(var w=/([^=?#&]+)=?([^&]*)/g,y={},U;U=w.exec(c);){var R=r(U[1]),z=r(U[2]);R===null||z===null||R in y||(y[R]=z)}return y}function u(c,w){w=w||"";var y=[],U,R;typeof w!="string"&&(w="?");for(R in c)if(t.call(c,R)){if(U=c[R],!U&&(U===null||U===e||isNaN(U))&&(U=""),R=n(R),U=n(U),R===null||U===null)continue;y.push(R+"="+U)}return y.length?w+y.join("&"):""}return we.stringify=u,we.parse=a,we}var Ae,ht;function on(){if(ht)return Ae;ht=1;var t=rn(),e=nn(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,w=/^[a-zA-Z]:/;function y(_){return(_||"").toString().replace(r,"")}var U=[["#","hash"],["?","query"],function(v,s){return I(s.protocol)?v.replace(/\\/g,"/"):v},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],R={hash:1,query:1};function z(_){var v;typeof window<"u"?v=window:typeof We<"u"?v=We:typeof self<"u"?v=self:v={};var s=v.location||{};_=_||s;var p={},h=typeof _,m;if(_.protocol==="blob:")p=new j(unescape(_.pathname),{});else if(h==="string"){p=new j(_,{});for(m in R)delete p[m]}else if(h==="object"){for(m in _)m in R||(p[m]=_[m]);p.slashes===void 0&&(p.slashes=a.test(_.href))}return p}function I(_){return _==="file:"||_==="ftp:"||_==="http:"||_==="https:"||_==="ws:"||_==="wss:"}function G(_,v){_=y(_),_=_.replace(n,""),v=v||{};var s=c.exec(_),p=s[1]?s[1].toLowerCase():"",h=!!s[2],m=!!s[3],k=0,O;return h?m?(O=s[2]+s[3]+s[4],k=s[2].length+s[3].length):(O=s[2]+s[4],k=s[2].length):m?(O=s[3]+s[4],k=s[3].length):O=s[4],p==="file:"?k>=2&&(O=O.slice(2)):I(p)?O=s[4]:p?h&&(O=O.slice(2)):k>=2&&I(v.protocol)&&(O=s[4]),{protocol:p,slashes:h||I(p),slashesCount:k,rest:O}}function V(_,v){if(_==="")return v;for(var s=(v||"/").split("/").slice(0,-1).concat(_.split("/")),p=s.length,h=s[p-1],m=!1,k=0;p--;)s[p]==="."?s.splice(p,1):s[p]===".."?(s.splice(p,1),k++):k&&(p===0&&(m=!0),s.splice(p,1),k--);return m&&s.unshift(""),(h==="."||h==="..")&&s.push(""),s.join("/")}function j(_,v,s){if(_=y(_),_=_.replace(n,""),!(this instanceof j))return new j(_,v,s);var p,h,m,k,O,F,B=U.slice(),Z=typeof v,P=this,K=0;for(Z!=="object"&&Z!=="string"&&(s=v,v=null),s&&typeof s!="function"&&(s=e.parse),v=z(v),h=G(_||"",v),p=!h.protocol&&!h.slashes,P.slashes=h.slashes||p&&v.slashes,P.protocol=h.protocol||v.protocol||"",_=h.rest,(h.protocol==="file:"&&(h.slashesCount!==2||w.test(_))||!h.slashes&&(h.protocol||h.slashesCount<2||!I(P.protocol)))&&(B[3]=[/(.*)/,"pathname"]);K<B.length;K++){if(k=B[K],typeof k=="function"){_=k(_,P);continue}m=k[0],F=k[1],m!==m?P[F]=_:typeof m=="string"?(O=m==="@"?_.lastIndexOf(m):_.indexOf(m),~O&&(typeof k[2]=="number"?(P[F]=_.slice(0,O),_=_.slice(O+k[2])):(P[F]=_.slice(O),_=_.slice(0,O)))):(O=m.exec(_))&&(P[F]=O[1],_=_.slice(0,O.index)),P[F]=P[F]||p&&k[3]&&v[F]||"",k[4]&&(P[F]=P[F].toLowerCase())}s&&(P.query=s(P.query)),p&&v.slashes&&P.pathname.charAt(0)!=="/"&&(P.pathname!==""||v.pathname!=="")&&(P.pathname=V(P.pathname,v.pathname)),P.pathname.charAt(0)!=="/"&&I(P.protocol)&&(P.pathname="/"+P.pathname),t(P.port,P.protocol)||(P.host=P.hostname,P.port=""),P.username=P.password="",P.auth&&(O=P.auth.indexOf(":"),~O?(P.username=P.auth.slice(0,O),P.username=encodeURIComponent(decodeURIComponent(P.username)),P.password=P.auth.slice(O+1),P.password=encodeURIComponent(decodeURIComponent(P.password))):P.username=encodeURIComponent(decodeURIComponent(P.auth)),P.auth=P.password?P.username+":"+P.password:P.username),P.origin=P.protocol!=="file:"&&I(P.protocol)&&P.host?P.protocol+"//"+P.host:"null",P.href=P.toString()}function L(_,v,s){var p=this;switch(_){case"query":typeof v=="string"&&v.length&&(v=(s||e.parse)(v)),p[_]=v;break;case"port":p[_]=v,t(v,p.protocol)?v&&(p.host=p.hostname+":"+v):(p.host=p.hostname,p[_]="");break;case"hostname":p[_]=v,p.port&&(v+=":"+p.port),p.host=v;break;case"host":p[_]=v,u.test(v)?(v=v.split(":"),p.port=v.pop(),p.hostname=v.join(":")):(p.hostname=v,p.port="");break;case"protocol":p.protocol=v.toLowerCase(),p.slashes=!s;break;case"pathname":case"hash":if(v){var h=_==="pathname"?"/":"#";p[_]=v.charAt(0)!==h?h+v:v}else p[_]=v;break;case"username":case"password":p[_]=encodeURIComponent(v);break;case"auth":var m=v.indexOf(":");~m?(p.username=v.slice(0,m),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=v.slice(m+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(v))}for(var k=0;k<U.length;k++){var O=U[k];O[4]&&(p[O[1]]=p[O[1]].toLowerCase())}return p.auth=p.password?p.username+":"+p.password:p.username,p.origin=p.protocol!=="file:"&&I(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString(),p}function M(_){(!_||typeof _!="function")&&(_=e.stringify);var v,s=this,p=s.host,h=s.protocol;h&&h.charAt(h.length-1)!==":"&&(h+=":");var m=h+(s.protocol&&s.slashes||I(s.protocol)?"//":"");return s.username?(m+=s.username,s.password&&(m+=":"+s.password),m+="@"):s.password?(m+=":"+s.password,m+="@"):s.protocol!=="file:"&&I(s.protocol)&&!p&&s.pathname!=="/"&&(m+="@"),(p[p.length-1]===":"||u.test(s.hostname)&&!s.port)&&(p+=":"),m+=p+s.pathname,v=typeof s.query=="object"?_(s.query):s.query,v&&(m+=v.charAt(0)!=="?"?"?"+v:v),s.hash&&(m+=s.hash),m}return j.prototype={set:L,toString:M},j.extractProtocol=G,j.location=z,j.trimLeft=y,j.qs=e,Ae=j,Ae}var an=on();const ln=Qt(an);function sn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})}function qe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */qe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(l,o,i){l[o]=i.value},u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",w=u.asyncIterator||"@@asyncIterator",y=u.toStringTag||"@@toStringTag";function U(l,o,i){return Object.defineProperty(l,o,{value:i,enumerable:!0,configurable:!0,writable:!0}),l[o]}try{U({},"")}catch{U=function(i,d,g){return i[d]=g}}function R(l,o,i,d){var g=o&&o.prototype instanceof M?o:M,f=Object.create(g.prototype),C=new K(d||[]);return a(f,"_invoke",{value:F(l,i,C)}),f}function z(l,o,i){try{return{type:"normal",arg:l.call(o,i)}}catch(d){return{type:"throw",arg:d}}}e.wrap=R;var I="suspendedStart",G="suspendedYield",V="executing",j="completed",L={};function M(){}function _(){}function v(){}var s={};U(s,c,function(){return this});var p=Object.getPrototypeOf,h=p&&p(p(X([])));h&&h!==r&&n.call(h,c)&&(s=h);var m=v.prototype=M.prototype=Object.create(s);function k(l){["next","throw","return"].forEach(function(o){U(l,o,function(i){return this._invoke(o,i)})})}function O(l,o){function i(g,f,C,A){var T=z(l[g],l,f);if(T.type!=="throw"){var N=T.arg,D=N.value;return D&&ee(D)=="object"&&n.call(D,"__await")?o.resolve(D.__await).then(function(H){i("next",H,C,A)},function(H){i("throw",H,C,A)}):o.resolve(D).then(function(H){N.value=H,C(N)},function(H){return i("throw",H,C,A)})}A(T.arg)}var d;a(this,"_invoke",{value:function(f,C){function A(){return new o(function(T,N){i(f,C,T,N)})}return d=d?d.then(A,A):A()}})}function F(l,o,i){var d=I;return function(g,f){if(d===V)throw Error("Generator is already running");if(d===j){if(g==="throw")throw f;return{value:t,done:!0}}for(i.method=g,i.arg=f;;){var C=i.delegate;if(C){var A=B(C,i);if(A){if(A===L)continue;return A}}if(i.method==="next")i.sent=i._sent=i.arg;else if(i.method==="throw"){if(d===I)throw d=j,i.arg;i.dispatchException(i.arg)}else i.method==="return"&&i.abrupt("return",i.arg);d=V;var T=z(l,o,i);if(T.type==="normal"){if(d=i.done?j:G,T.arg===L)continue;return{value:T.arg,done:i.done}}T.type==="throw"&&(d=j,i.method="throw",i.arg=T.arg)}}}function B(l,o){var i=o.method,d=l.iterator[i];if(d===t)return o.delegate=null,i==="throw"&&l.iterator.return&&(o.method="return",o.arg=t,B(l,o),o.method==="throw")||i!=="return"&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),L;var g=z(d,l.iterator,o.arg);if(g.type==="throw")return o.method="throw",o.arg=g.arg,o.delegate=null,L;var f=g.arg;return f?f.done?(o[l.resultName]=f.value,o.next=l.nextLoc,o.method!=="return"&&(o.method="next",o.arg=t),o.delegate=null,L):f:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,L)}function Z(l){var o={tryLoc:l[0]};1 in l&&(o.catchLoc=l[1]),2 in l&&(o.finallyLoc=l[2],o.afterLoc=l[3]),this.tryEntries.push(o)}function P(l){var o=l.completion||{};o.type="normal",delete o.arg,l.completion=o}function K(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(Z,this),this.reset(!0)}function X(l){if(l||l===""){var o=l[c];if(o)return o.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var i=-1,d=function g(){for(;++i<l.length;)if(n.call(l,i))return g.value=l[i],g.done=!1,g;return g.value=t,g.done=!0,g};return d.next=d}}throw new TypeError(ee(l)+" is not iterable")}return _.prototype=v,a(m,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:_,configurable:!0}),_.displayName=U(v,y,"GeneratorFunction"),e.isGeneratorFunction=function(l){var o=typeof l=="function"&&l.constructor;return!!o&&(o===_||(o.displayName||o.name)==="GeneratorFunction")},e.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,v):(l.__proto__=v,U(l,y,"GeneratorFunction")),l.prototype=Object.create(m),l},e.awrap=function(l){return{__await:l}},k(O.prototype),U(O.prototype,w,function(){return this}),e.AsyncIterator=O,e.async=function(l,o,i,d,g){g===void 0&&(g=Promise);var f=new O(R(l,o,i,d),g);return e.isGeneratorFunction(o)?f:f.next().then(function(C){return C.done?C.value:f.next()})},k(m),U(m,y,"Generator"),U(m,c,function(){return this}),U(m,"toString",function(){return"[object Generator]"}),e.keys=function(l){var o=Object(l),i=[];for(var d in o)i.push(d);return i.reverse(),function g(){for(;i.length;){var f=i.pop();if(f in o)return g.value=f,g.done=!1,g}return g.done=!0,g}},e.values=X,K.prototype={constructor:K,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!o)for(var i in this)i.charAt(0)==="t"&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function d(N,D){return C.type="throw",C.arg=o,i.next=N,D&&(i.method="next",i.arg=t),!!D}for(var g=this.tryEntries.length-1;g>=0;--g){var f=this.tryEntries[g],C=f.completion;if(f.tryLoc==="root")return d("end");if(f.tryLoc<=this.prev){var A=n.call(f,"catchLoc"),T=n.call(f,"finallyLoc");if(A&&T){if(this.prev<f.catchLoc)return d(f.catchLoc,!0);if(this.prev<f.finallyLoc)return d(f.finallyLoc)}else if(A){if(this.prev<f.catchLoc)return d(f.catchLoc,!0)}else{if(!T)throw Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return d(f.finallyLoc)}}}},abrupt:function(o,i){for(var d=this.tryEntries.length-1;d>=0;--d){var g=this.tryEntries[d];if(g.tryLoc<=this.prev&&n.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var f=g;break}}f&&(o==="break"||o==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var C=f?f.completion:{};return C.type=o,C.arg=i,f?(this.method="next",this.next=f.finallyLoc,L):this.complete(C)},complete:function(o,i){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&i&&(this.next=i),L},finish:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var d=this.tryEntries[i];if(d.finallyLoc===o)return this.complete(d.completion,d.afterLoc),P(d),L}},catch:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var d=this.tryEntries[i];if(d.tryLoc===o){var g=d.completion;if(g.type==="throw"){var f=g.arg;P(d)}return f}}throw Error("illegal catch attempt")},delegateYield:function(o,i,d){return this.delegate={iterator:X(o),resultName:i,nextLoc:d},this.method==="next"&&(this.arg=t),L}},e}function yt(t,e,r,n,a,u,c){try{var w=t[u](c),y=w.value}catch(U){r(U);return}w.done?e(y):Promise.resolve(y).then(n,a)}function un(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=t.apply(e,r);function c(y){yt(u,n,a,c,w,"next",y)}function w(y){yt(u,n,a,c,w,"throw",y)}c(void 0)})}}function Ht(t,e){return pn(t)||cn(t,e)||Mt(t,e)||fn()}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cn(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,u,c,w=[],y=!0,U=!1;try{if(u=(r=r.call(t)).next,e!==0)for(;!(y=(n=u.call(r)).done)&&(w.push(n.value),w.length!==e);y=!0);}catch(R){U=!0,a=R}finally{try{if(!y&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(U)throw a}}return w}}function pn(t){if(Array.isArray(t))return t}function ee(t){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(t)}function dn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Mt(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(U){throw U},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,c=!1,w;return{s:function(){r=r.call(t)},n:function(){var U=r.next();return u=U.done,U},e:function(U){c=!0,w=U},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(c)throw w}}}}function Mt(t,e){if(t){if(typeof t=="string")return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(t,e)}}function mt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vt(Object(r),!0).forEach(function(n){hn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hn(t,e,r){return e=Gt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gt(n.key),n)}}function mn(t,e,r){return e&&gt(t.prototype,e),r&&gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gt(t){var e=vn(t,"string");return ee(e)=="symbol"?e:e+""}function vn(t,e){if(ee(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ee(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pe="tus-v1",xe="ietf-draft-03",fe="ietf-draft-05",gn={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:Vt,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:Pe},Ee=(function(){function t(e,r){yn(this,t),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return mn(t,[{key:"findPreviousUploads",value:function(){var r=this;return this.options.fingerprint(this.file,this.options).then(function(n){return r._urlStorage.findUploadsByFingerprint(n)})}},{key:"resumeFromPreviousUpload",value:function(r){this.url=r.uploadUrl||null,this._parallelUploadUrls=r.parallelUploadUrls||null,this._urlStorageKey=r.urlStorageKey}},{key:"start",value:function(){var r=this,n=this.file;if(!n){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![Pe,xe,fe].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var a=this.options.retryDelays;if(a!=null&&Object.prototype.toString.call(a)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var u=0,c=["uploadUrl","uploadSize","uploadLengthDeferred"];u<c.length;u++){var w=c[u];if(this.options[w]){this._emitError(new Error("tus: cannot use the ".concat(w," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(n,this.options).then(function(y){return r._fingerprint=y,r._source?r._source:r.options.fileReader.openFile(n,r.options.chunkSize)}).then(function(y){if(r._source=y,r.options.uploadLengthDeferred)r._size=null;else if(r.options.uploadSize!=null){if(r._size=Number(r.options.uploadSize),Number.isNaN(r._size)){r._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(r._size=r._source.size,r._size==null){r._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}r.options.parallelUploads>1||r._parallelUploadUrls!=null?r._startParallelUpload():r._startSingleUpload()}).catch(function(y){r._emitError(y)})}},{key:"_startParallelUpload",value:function(){var r,n=this,a=this._size,u=0;this._parallelUploads=[];var c=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,w=(r=this.options.parallelUploadBoundaries)!==null&&r!==void 0?r:bn(this._source.size,c);this._parallelUploadUrls&&w.forEach(function(R,z){R.uploadUrl=n._parallelUploadUrls[z]||null}),this._parallelUploadUrls=new Array(w.length);var y=w.map(function(R,z){var I=0;return n._source.slice(R.start,R.end).then(function(G){var V=G.value;return new Promise(function(j,L){var M=ne(ne({},n.options),{},{uploadUrl:R.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:n.options.metadataForPartialUploads,headers:ne(ne({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:j,onError:L,onProgress:function(s){u=u-I+s,I=s,n._emitProgress(u,a)},onUploadUrlAvailable:function(){n._parallelUploadUrls[z]=_.url,n._parallelUploadUrls.filter(function(s){return!!s}).length===w.length&&n._saveUploadInUrlStorage()}}),_=new t(V,M);_.start(),n._parallelUploads.push(_)})})}),U;Promise.all(y).then(function(){U=n._openRequest("POST",n.options.endpoint),U.setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var R=_t(n.options.metadata);return R!==""&&U.setHeader("Upload-Metadata",R),n._sendRequest(U,null)}).then(function(R){if(!oe(R.getStatus(),200)){n._emitHttpError(U,R,"tus: unexpected response while creating upload");return}var z=R.getHeader("Location");if(z==null){n._emitHttpError(U,R,"tus: invalid or missing Location header");return}n.url=St(n.options.endpoint,z),"Created upload at ".concat(n.url),n._emitSuccess(R)}).catch(function(R){n._emitError(R)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(r){var n=this;if(this._parallelUploads!=null){var a=dn(this._parallelUploads),u;try{for(a.s();!(u=a.n()).done;){var c=u.value;c.abort(r)}}catch(w){a.e(w)}finally{a.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!r||this.url==null?Promise.resolve():t.terminate(this.url,this.options).then(function(){return n._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(r,n,a,u){this._emitError(new _e(a,u,r,n))}},{key:"_emitError",value:function(r){var n=this;if(!this._aborted){if(this.options.retryDelays!=null){var a=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(a&&(this._retryAttempt=0),Ut(r,this._retryAttempt,this.options)){var u=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){n.start()},u);return}}if(typeof this.options.onError=="function")this.options.onError(r);else throw r}}},{key:"_emitSuccess",value:function(r){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:r})}},{key:"_emitProgress",value:function(r,n){typeof this.options.onProgress=="function"&&this.options.onProgress(r,n)}},{key:"_emitChunkComplete",value:function(r,n,a){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(r,n,a)}},{key:"_createUpload",value:function(){var r=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var n=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?n.setHeader("Upload-Defer-Length","1"):n.setHeader("Upload-Length","".concat(this._size));var a=_t(this.options.metadata);a!==""&&n.setHeader("Upload-Metadata",a);var u;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,u=this._addChunkToRequest(n)):((this.options.protocol===xe||this.options.protocol===fe)&&n.setHeader("Upload-Complete","?0"),u=this._sendRequest(n,null)),u.then(function(c){if(!oe(c.getStatus(),200)){r._emitHttpError(n,c,"tus: unexpected response while creating upload");return}var w=c.getHeader("Location");if(w==null){r._emitHttpError(n,c,"tus: invalid or missing Location header");return}if(r.url=St(r.options.endpoint,w),"Created upload at ".concat(r.url),typeof r.options.onUploadUrlAvailable=="function"&&r.options.onUploadUrlAvailable(),r._size===0){r._emitSuccess(c),r._source.close();return}r._saveUploadInUrlStorage().then(function(){r.options.uploadDataDuringCreation?r._handleUploadResponse(n,c):(r._offset=0,r._performUpload())})}).catch(function(c){r._emitHttpError(n,null,"tus: failed to create upload",c)})}},{key:"_resumeUpload",value:function(){var r=this,n=this._openRequest("HEAD",this.url),a=this._sendRequest(n,null);a.then(function(u){var c=u.getStatus();if(!oe(c,200)){if(c===423){r._emitHttpError(n,u,"tus: upload is currently locked; retry later");return}if(oe(c,400)&&r._removeFromUrlStorage(),!r.options.endpoint){r._emitHttpError(n,u,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}r.url=null,r._createUpload();return}var w=Number.parseInt(u.getHeader("Upload-Offset"),10);if(Number.isNaN(w)){r._emitHttpError(n,u,"tus: invalid or missing offset value");return}var y=Number.parseInt(u.getHeader("Upload-Length"),10);if(Number.isNaN(y)&&!r.options.uploadLengthDeferred&&r.options.protocol===Pe){r._emitHttpError(n,u,"tus: invalid or missing length value");return}typeof r.options.onUploadUrlAvailable=="function"&&r.options.onUploadUrlAvailable(),r._saveUploadInUrlStorage().then(function(){if(w===y){r._emitProgress(y,y),r._emitSuccess(u);return}r._offset=w,r._performUpload()})}).catch(function(u){r._emitHttpError(n,null,"tus: failed to resume upload",u)})}},{key:"_performUpload",value:function(){var r=this;if(!this._aborted){var n;this.options.overridePatchMethod?(n=this._openRequest("POST",this.url),n.setHeader("X-HTTP-Method-Override","PATCH")):n=this._openRequest("PATCH",this.url),n.setHeader("Upload-Offset","".concat(this._offset));var a=this._addChunkToRequest(n);a.then(function(u){if(!oe(u.getStatus(),200)){r._emitHttpError(n,u,"tus: unexpected response while uploading chunk");return}r._handleUploadResponse(n,u)}).catch(function(u){r._aborted||r._emitHttpError(n,null,"tus: failed to upload chunk at offset ".concat(r._offset),u)})}}},{key:"_addChunkToRequest",value:function(r){var n=this,a=this._offset,u=this._offset+this.options.chunkSize;return r.setProgressHandler(function(c){n._emitProgress(a+c,n._size)}),this.options.protocol===Pe?r.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===fe&&r.setHeader("Content-Type","application/partial-upload"),(u===Number.POSITIVE_INFINITY||u>this._size)&&!this.options.uploadLengthDeferred&&(u=this._size),this._source.slice(a,u).then(function(c){var w=c.value,y=c.done,U=w!=null&&w.size?w.size:0;n.options.uploadLengthDeferred&&y&&(n._size=n._offset+U,r.setHeader("Upload-Length","".concat(n._size)));var R=n._offset+U;return!n.options.uploadLengthDeferred&&y&&R!==n._size?Promise.reject(new Error("upload was configured with a size of ".concat(n._size," bytes, but the source is done after ").concat(R," bytes"))):w===null?n._sendRequest(r):((n.options.protocol===xe||n.options.protocol===fe)&&r.setHeader("Upload-Complete",y?"?1":"?0"),n._emitProgress(n._offset,n._size),n._sendRequest(r,w))})}},{key:"_handleUploadResponse",value:function(r,n){var a=Number.parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){this._emitHttpError(r,n,"tus: invalid or missing offset value");return}if(this._emitProgress(a,this._size),this._emitChunkComplete(a-this._offset,a,this._size),this._offset=a,a===this._size){this._emitSuccess(n),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(r,n){var a=bt(r,n,this.options);return this._req=a,a}},{key:"_removeFromUrlStorage",value:function(){var r=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(n){r._emitError(n)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var r=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var n={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?n.parallelUploadUrls=this._parallelUploadUrls:n.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,n).then(function(a){r._urlStorageKey=a})}},{key:"_sendRequest",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return wt(r,n,this.options)}}],[{key:"terminate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=bt("DELETE",r,n);return wt(a,null,n).then(function(u){if(u.getStatus()!==204)throw new _e("tus: unexpected response while terminating upload",null,a,u)}).catch(function(u){if(u instanceof _e||(u=new _e("tus: failed to terminate upload",u,a,null)),!Ut(u,0,n))throw u;var c=n.retryDelays[0],w=n.retryDelays.slice(1),y=ne(ne({},n),{},{retryDelays:w});return new Promise(function(U){return setTimeout(U,c)}).then(function(){return t.terminate(r,y)})})}}])})();function _t(t){return Object.entries(t).map(function(e){var r=Ht(e,2),n=r[0],a=r[1];return"".concat(n," ").concat(tn.encode(String(a)))}).join(",")}function oe(t,e){return t>=e&&t<e+100}function bt(t,e,r){var n=r.httpStack.createRequest(t,e);r.protocol===xe?n.setHeader("Upload-Draft-Interop-Version","5"):r.protocol===fe?n.setHeader("Upload-Draft-Interop-Version","6"):n.setHeader("Tus-Resumable","1.0.0");for(var a=r.headers||{},u=0,c=Object.entries(a);u<c.length;u++){var w=Ht(c[u],2),y=w[0],U=w[1];n.setHeader(y,U)}if(r.addRequestId){var R=sn();n.setHeader("X-Request-ID",R)}return n}function wt(t,e,r){return Be.apply(this,arguments)}function Be(){return Be=un(qe().mark(function t(e,r,n){var a;return qe().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(typeof n.onBeforeRequest!="function"){c.next=3;break}return c.next=3,n.onBeforeRequest(e);case 3:return c.next=5,e.send(r);case 5:if(a=c.sent,typeof n.onAfterResponse!="function"){c.next=9;break}return c.next=9,n.onAfterResponse(e,a);case 9:return c.abrupt("return",a);case 10:case"end":return c.stop()}},t)})),Be.apply(this,arguments)}function _n(){var t=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(t=!1),t}function Ut(t,e,r){return r.retryDelays==null||e>=r.retryDelays.length||t.originalRequest==null?!1:r&&typeof r.onShouldRetry=="function"?r.onShouldRetry(t,e,r):Vt(t)}function Vt(t){var e=t.originalResponse?t.originalResponse.getStatus():0;return(!oe(e,400)||e===409||e===423)&&_n()}function St(t,e){return new ln(e,t).toString()}function bn(t,e){for(var r=Math.floor(t/e),n=[],a=0;a<e;a++)n.push({start:r*a,end:r*(a+1)});return n[e-1].end=t,n}Ee.defaultOptions=gn;var Kt=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function wn(t){return new Promise(function(e,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var a=n.response;e(a)},n.onerror=function(a){r(a)},n.open("GET",t),n.send()})}var Un=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function Sn(t){return new Promise(function(e,r){var n=new FileReader;n.onload=function(){var a=new Uint8Array(n.result);e({value:a})},n.onerror=function(a){r(a)},n.readAsArrayBuffer(t)})}function he(t){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(t)}function Pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kn(n.key),n)}}function En(t,e,r){return e&&xn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kn(t){var e=On(t,"string");return he(e)=="symbol"?e:e+""}function On(t,e){if(he(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(he(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pt=(function(){function t(e){Pn(this,t),this._file=e,this.size=e.size}return En(t,[{key:"slice",value:function(r,n){if(Un())return Sn(this._file.slice(r,n));var a=this._file.slice(r,n),u=n>=this.size;return Promise.resolve({value:a,done:u})}},{key:"close",value:function(){}}])})();function ye(t){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(t)}function Rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,An(n.key),n)}}function jn(t,e,r){return e&&Cn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function An(t){var e=Tn(t,"string");return ye(e)=="symbol"?e:e+""}function Tn(t,e){if(ye(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ye(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xt(t){return t===void 0?0:t.size!==void 0?t.size:t.length}function Ln(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}throw new Error("Unknown data type")}var zn=(function(){function t(e){Rn(this,t),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return jn(t,[{key:"slice",value:function(r,n){return r<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(r,n)}},{key:"_readUntilEnoughDataOrDone",value:function(r,n){var a=this,u=n<=this._bufferOffset+xt(this._buffer);if(this._done||u){var c=this._getDataFromBuffer(r,n),w=c==null?this._done:!1;return Promise.resolve({value:c,done:w})}return this._reader.read().then(function(y){var U=y.value,R=y.done;return R?a._done=!0:a._buffer===void 0?a._buffer=U:a._buffer=Ln(a._buffer,U),a._readUntilEnoughDataOrDone(r,n)})}},{key:"_getDataFromBuffer",value:function(r,n){r>this._bufferOffset&&(this._buffer=this._buffer.slice(r-this._bufferOffset),this._bufferOffset=r);var a=xt(this._buffer)===0;return this._done&&a?null:this._buffer.slice(0,n-r)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])})();function te(t){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(t)}function $e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$e=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(l,o,i){l[o]=i.value},u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",w=u.asyncIterator||"@@asyncIterator",y=u.toStringTag||"@@toStringTag";function U(l,o,i){return Object.defineProperty(l,o,{value:i,enumerable:!0,configurable:!0,writable:!0}),l[o]}try{U({},"")}catch{U=function(i,d,g){return i[d]=g}}function R(l,o,i,d){var g=o&&o.prototype instanceof M?o:M,f=Object.create(g.prototype),C=new K(d||[]);return a(f,"_invoke",{value:F(l,i,C)}),f}function z(l,o,i){try{return{type:"normal",arg:l.call(o,i)}}catch(d){return{type:"throw",arg:d}}}e.wrap=R;var I="suspendedStart",G="suspendedYield",V="executing",j="completed",L={};function M(){}function _(){}function v(){}var s={};U(s,c,function(){return this});var p=Object.getPrototypeOf,h=p&&p(p(X([])));h&&h!==r&&n.call(h,c)&&(s=h);var m=v.prototype=M.prototype=Object.create(s);function k(l){["next","throw","return"].forEach(function(o){U(l,o,function(i){return this._invoke(o,i)})})}function O(l,o){function i(g,f,C,A){var T=z(l[g],l,f);if(T.type!=="throw"){var N=T.arg,D=N.value;return D&&te(D)=="object"&&n.call(D,"__await")?o.resolve(D.__await).then(function(H){i("next",H,C,A)},function(H){i("throw",H,C,A)}):o.resolve(D).then(function(H){N.value=H,C(N)},function(H){return i("throw",H,C,A)})}A(T.arg)}var d;a(this,"_invoke",{value:function(f,C){function A(){return new o(function(T,N){i(f,C,T,N)})}return d=d?d.then(A,A):A()}})}function F(l,o,i){var d=I;return function(g,f){if(d===V)throw Error("Generator is already running");if(d===j){if(g==="throw")throw f;return{value:t,done:!0}}for(i.method=g,i.arg=f;;){var C=i.delegate;if(C){var A=B(C,i);if(A){if(A===L)continue;return A}}if(i.method==="next")i.sent=i._sent=i.arg;else if(i.method==="throw"){if(d===I)throw d=j,i.arg;i.dispatchException(i.arg)}else i.method==="return"&&i.abrupt("return",i.arg);d=V;var T=z(l,o,i);if(T.type==="normal"){if(d=i.done?j:G,T.arg===L)continue;return{value:T.arg,done:i.done}}T.type==="throw"&&(d=j,i.method="throw",i.arg=T.arg)}}}function B(l,o){var i=o.method,d=l.iterator[i];if(d===t)return o.delegate=null,i==="throw"&&l.iterator.return&&(o.method="return",o.arg=t,B(l,o),o.method==="throw")||i!=="return"&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),L;var g=z(d,l.iterator,o.arg);if(g.type==="throw")return o.method="throw",o.arg=g.arg,o.delegate=null,L;var f=g.arg;return f?f.done?(o[l.resultName]=f.value,o.next=l.nextLoc,o.method!=="return"&&(o.method="next",o.arg=t),o.delegate=null,L):f:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,L)}function Z(l){var o={tryLoc:l[0]};1 in l&&(o.catchLoc=l[1]),2 in l&&(o.finallyLoc=l[2],o.afterLoc=l[3]),this.tryEntries.push(o)}function P(l){var o=l.completion||{};o.type="normal",delete o.arg,l.completion=o}function K(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(Z,this),this.reset(!0)}function X(l){if(l||l===""){var o=l[c];if(o)return o.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var i=-1,d=function g(){for(;++i<l.length;)if(n.call(l,i))return g.value=l[i],g.done=!1,g;return g.value=t,g.done=!0,g};return d.next=d}}throw new TypeError(te(l)+" is not iterable")}return _.prototype=v,a(m,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:_,configurable:!0}),_.displayName=U(v,y,"GeneratorFunction"),e.isGeneratorFunction=function(l){var o=typeof l=="function"&&l.constructor;return!!o&&(o===_||(o.displayName||o.name)==="GeneratorFunction")},e.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,v):(l.__proto__=v,U(l,y,"GeneratorFunction")),l.prototype=Object.create(m),l},e.awrap=function(l){return{__await:l}},k(O.prototype),U(O.prototype,w,function(){return this}),e.AsyncIterator=O,e.async=function(l,o,i,d,g){g===void 0&&(g=Promise);var f=new O(R(l,o,i,d),g);return e.isGeneratorFunction(o)?f:f.next().then(function(C){return C.done?C.value:f.next()})},k(m),U(m,y,"Generator"),U(m,c,function(){return this}),U(m,"toString",function(){return"[object Generator]"}),e.keys=function(l){var o=Object(l),i=[];for(var d in o)i.push(d);return i.reverse(),function g(){for(;i.length;){var f=i.pop();if(f in o)return g.value=f,g.done=!1,g}return g.done=!0,g}},e.values=X,K.prototype={constructor:K,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!o)for(var i in this)i.charAt(0)==="t"&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function d(N,D){return C.type="throw",C.arg=o,i.next=N,D&&(i.method="next",i.arg=t),!!D}for(var g=this.tryEntries.length-1;g>=0;--g){var f=this.tryEntries[g],C=f.completion;if(f.tryLoc==="root")return d("end");if(f.tryLoc<=this.prev){var A=n.call(f,"catchLoc"),T=n.call(f,"finallyLoc");if(A&&T){if(this.prev<f.catchLoc)return d(f.catchLoc,!0);if(this.prev<f.finallyLoc)return d(f.finallyLoc)}else if(A){if(this.prev<f.catchLoc)return d(f.catchLoc,!0)}else{if(!T)throw Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return d(f.finallyLoc)}}}},abrupt:function(o,i){for(var d=this.tryEntries.length-1;d>=0;--d){var g=this.tryEntries[d];if(g.tryLoc<=this.prev&&n.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var f=g;break}}f&&(o==="break"||o==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var C=f?f.completion:{};return C.type=o,C.arg=i,f?(this.method="next",this.next=f.finallyLoc,L):this.complete(C)},complete:function(o,i){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&i&&(this.next=i),L},finish:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var d=this.tryEntries[i];if(d.finallyLoc===o)return this.complete(d.completion,d.afterLoc),P(d),L}},catch:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var d=this.tryEntries[i];if(d.tryLoc===o){var g=d.completion;if(g.type==="throw"){var f=g.arg;P(d)}return f}}throw Error("illegal catch attempt")},delegateYield:function(o,i,d){return this.delegate={iterator:X(o),resultName:i,nextLoc:d},this.method==="next"&&(this.arg=t),L}},e}function Et(t,e,r,n,a,u,c){try{var w=t[u](c),y=w.value}catch(U){r(U);return}w.done?e(y):Promise.resolve(y).then(n,a)}function In(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=t.apply(e,r);function c(y){Et(u,n,a,c,w,"next",y)}function w(y){Et(u,n,a,c,w,"throw",y)}c(void 0)})}}function Fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bn(n.key),n)}}function qn(t,e,r){return e&&Dn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bn(t){var e=$n(t,"string");return te(e)=="symbol"?e:e+""}function $n(t,e){if(te(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(te(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nn=(function(){function t(){Fn(this,t)}return qn(t,[{key:"openFile",value:(function(){var e=In($e().mark(function n(a,u){var c;return $e().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(Kt()&&a&&typeof a.uri<"u")){y.next=11;break}return y.prev=1,y.next=4,wn(a.uri);case 4:return c=y.sent,y.abrupt("return",new Pt(c));case 8:throw y.prev=8,y.t0=y.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(y.t0));case 11:if(!(typeof a.slice=="function"&&typeof a.size<"u")){y.next=13;break}return y.abrupt("return",Promise.resolve(new Pt(a)));case 13:if(typeof a.read!="function"){y.next=18;break}if(u=Number(u),Number.isFinite(u)){y.next=17;break}return y.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return y.abrupt("return",Promise.resolve(new zn(a,u)));case 18:return y.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return y.stop()}},n,null,[[1,8]])}));function r(n,a){return e.apply(this,arguments)}return r})()}])})();function Hn(t,e){return Kt()?Promise.resolve(Mn(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}function Mn(t,e){var r=t.exif?Gn(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",r,e.endpoint].join("/")}function Gn(t){var e=0;if(t.length===0)return e;for(var r=0;r<t.length;r++){var n=t.charCodeAt(r);e=(e<<5)-e+n,e&=e}return e}function me(t){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(t)}function Ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kn(n.key),n)}}function Ze(t,e,r){return e&&Vn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kn(t){var e=Zn(t,"string");return me(e)=="symbol"?e:e+""}function Zn(t,e){if(me(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(me(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xn=(function(){function t(){Ke(this,t)}return Ze(t,[{key:"createRequest",value:function(r,n){return new Yn(r,n)}},{key:"getName",value:function(){return"XHRHttpStack"}}])})(),Yn=(function(){function t(e,r){Ke(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,r,!0),this._method=e,this._url=r,this._headers={}}return Ze(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(r,n){this._xhr.setRequestHeader(r,n),this._headers[r]=n}},{key:"getHeader",value:function(r){return this._headers[r]}},{key:"setProgressHandler",value:function(r){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(n){n.lengthComputable&&r(n.loaded)})}},{key:"send",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(a,u){r._xhr.onload=function(){a(new Wn(r._xhr))},r._xhr.onerror=function(c){u(c)},r._xhr.send(n)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})(),Wn=(function(){function t(e){Ke(this,t),this._xhr=e}return Ze(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(r){return this._xhr.getResponseHeader(r)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])})();function ve(t){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(t)}function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,to(n.key),n)}}function eo(t,e,r){return e&&Qn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function to(t){var e=ro(t,"string");return ve(e)=="symbol"?e:e+""}function ro(t,e){if(ve(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ve(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ne=!1;try{Ne="localStorage"in window;var Te="tusSupport",kt=localStorage.getItem(Te);localStorage.setItem(Te,kt),kt===null&&localStorage.removeItem(Te)}catch(t){if(t.code===t.SECURITY_ERR||t.code===t.QUOTA_EXCEEDED_ERR)Ne=!1;else throw t}var no=Ne,oo=(function(){function t(){Jn(this,t)}return eo(t,[{key:"findAllUploads",value:function(){var r=this._findEntries("tus::");return Promise.resolve(r)}},{key:"findUploadsByFingerprint",value:function(r){var n=this._findEntries("tus::".concat(r,"::"));return Promise.resolve(n)}},{key:"removeUpload",value:function(r){return localStorage.removeItem(r),Promise.resolve()}},{key:"addUpload",value:function(r,n){var a=Math.round(Math.random()*1e12),u="tus::".concat(r,"::").concat(a);return localStorage.setItem(u,JSON.stringify(n)),Promise.resolve(u)}},{key:"_findEntries",value:function(r){for(var n=[],a=0;a<localStorage.length;a++){var u=localStorage.key(a);if(u.indexOf(r)===0)try{var c=JSON.parse(localStorage.getItem(u));c.urlStorageKey=u,n.push(c)}catch{}}return n}}])})();function le(t){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(t)}function ao(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xt(n.key),n)}}function lo(t,e,r){return r&&io(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function so(t,e,r){return e=ke(e),uo(t,Zt()?Reflect.construct(e,r||[],ke(t).constructor):e.apply(t,r))}function uo(t,e){if(e&&(le(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fo(t)}function fo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zt=function(){return!!t})()}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ke(t)}function co(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}function He(t,e){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},He(t,e)}function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ot(Object(r),!0).forEach(function(n){po(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function po(t,e,r){return e=Xt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xt(t){var e=ho(t,"string");return le(e)=="symbol"?e:e+""}function ho(t,e){if(le(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(le(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rt=ae(ae({},Ee.defaultOptions),{},{httpStack:new Xn,fileReader:new Nn,urlStorage:no?new oo:new Mr,fingerprint:Hn}),yo=(function(t){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ao(this,e),n=ae(ae({},Rt),n),so(this,e,[r,n])}return co(e,t),lo(e,null,[{key:"terminate",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=ae(ae({},Rt),a),Ee.terminate(n,a)}}])})(Ee);function mo(t={}){const e=Ue(new Map),r=Ue([]),n=new Set;let a=0,u=!1;const c=Ue({taskId:t.taskId||"task-123456",chunkSizeMB:t.chunkSizeMB||5,parallelUploads:t.parallelUploads||6,queueConcurrency:t.queueConcurrency||3}),w=Je(()=>{const h={waiting:0,uploading:0,paused:0,error:0};return e.value.forEach(m=>{h[m.status]++}),h}),y=Je(()=>{if(e.value.size===0)return 0;let h=0,m=0;return e.value.forEach(k=>{h+=k.file.size,m+=k.file.size*k.progress/100}),h>0?m/h*100:0}),U=h=>{const m=a++;e.value.set(m,{id:m,file:h,upload:null,status:"waiting",progress:0,speed:"",startTime:null}),j()},R=h=>{const m=c.value.chunkSizeMB*1024*1024;return new yo(h.file,{endpoint:`${kr}${Or.files}/`,chunkSize:m,addRequestId:!0,uploadDataDuringCreation:!0,removeFingerprintOnSuccess:!0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:c.value.parallelUploads,metadata:{filename:h.file.name,filetype:h.file.type,task_id:c.value.taskId.toString()},metadataForPartialUploads:{task_id:c.value.taskId.toString()},onError:k=>{console.error(":",k),h.status="error",n.delete(h.id),j()},onProgress:(k,O)=>{const F=k/O*100;if(h.progress=parseFloat(F.toFixed(1)),h.startTime){const B=(Date.now()-h.startTime)/1e3,Z=k/B;h.speed=Le(Z)+"/s"}},onSuccess:()=>{ge.success(`${h.file.name} `),r.value.unshift({id:Date.now(),fileName:h.file.name,size:h.file.size,time:Yt(new Date),url:h.upload.url}),e.value.delete(h.id),n.delete(h.id),j()}})},z=async h=>{const m=e.value.get(h);if(!m||n.size>=c.value.queueConcurrency)return;n.add(h),m.status="uploading",m.startTime=Date.now();const k=R(m);m.upload=k;try{const O=await k.findPreviousUploads();O.length>0&&k.resumeFromPreviousUpload(O[0]),k.start()}catch(O){console.error(":",O),m.status="error",n.delete(h)}},I=h=>{const m=e.value.get(h);!m||!m.upload||(m.upload.abort(),m.status="paused",n.delete(h))},G=h=>{const m=e.value.get(h);if(!(!m||!m.upload)){if(n.size>=c.value.queueConcurrency){ge.warning("");return}n.add(h),m.status="uploading",m.upload.start()}},V=h=>{const m=e.value.get(h);m&&m.upload&&m.upload.abort(),n.delete(h),e.value.delete(h),j()},j=()=>{if(u)return;Array.from(e.value.values()).filter(m=>m.status==="waiting").slice(0,c.value.queueConcurrency-n.size).forEach(m=>{z(m.id)})};return{uploads:e,history:r,uploadConfig:c,statusCount:w,totalProgress:y,addFile:U,startUpload:z,pauseUpload:I,resumeUpload:G,removeUpload:V,startAll:()=>{u=!1,j()},pauseAll:()=>{u=!0,n.forEach(h=>{I(h)})},resumeAll:()=>{u=!1,Array.from(e.value.values()).filter(m=>m.status==="paused").forEach(m=>{G(m.id)}),j()},clearAll:async()=>{await er.confirm("?","",{confirmButtonText:"",cancelButtonText:"",type:"warning"}).catch(()=>!1)&&(n.forEach(m=>{const k=e.value.get(m);k&&k.upload&&k.upload.abort()}),e.value.clear(),n.clear(),u=!1)},copyLink:h=>{navigator.clipboard.writeText(h).then(()=>{ge.success("")}).catch(()=>{ge.error("")})},updateConfig:h=>{c.value={...c.value,...h}}}}const vo={class:"page-toolbar"},go={class:"toolbar-left"},_o={class:"toolbar-right"},bo={class:"stats-badges"},wo={class:"content-layout"},Uo={class:"config-panel"},So={class:"config-summary"},Po={class:"summary-items"},xo={class:"main-panel"},Eo={class:"tab-label"},ko={class:"tab-content"},Oo={class:"upload-zone"},Ro={class:"upload-dragger-content"},Co={class:"upload-features"},jo={class:"feature-item"},Ao={class:"feature-item"},To={class:"feature-item"},Lo={key:0,class:"queue-container"},zo={class:"file-queue"},Io={class:"file-main"},Fo={class:"file-icon-wrapper"},Do={class:"file-details"},qo={class:"file-name-row"},Bo=["title"],$o={class:"file-metadata"},No={class:"meta-size"},Ho={class:"meta-id"},Mo={key:0,class:"progress-container"},Go={class:"progress-header"},Vo={class:"progress-percentage"},Ko={class:"progress-speed"},Zo={class:"file-actions"},Xo={class:"tab-label"},Yo={class:"tab-content"},Wo={class:"history-list"},Jo={class:"history-main"},Qo={class:"history-icon-wrapper"},ea={class:"history-details"},ta=["title"],ra={class:"history-metadata"},na={class:"meta-size"},oa={class:"meta-time"},aa={__name:"FileUpload",setup(t){const{activeTab:e}=Cr("queue"),r=Ue(null),{uploads:n,history:a,uploadConfig:u,statusCount:c,addFile:w,startUpload:y,pauseUpload:U,resumeUpload:R,removeUpload:z,startAll:I,pauseAll:G,resumeAll:V,clearAll:j,copyLink:L}=mo({taskId:"task-123456",chunkSizeMB:5,parallelUploads:6,queueConcurrency:3}),M=[{color:"#667eea",percentage:20},{color:"#764ba2",percentage:40},{color:"#f093fb",percentage:60},{color:"#4facfe",percentage:80},{color:"#00f2fe",percentage:100}],_=v=>{w(v.raw)};return(v,s)=>{const p=or,h=nr,m=rr,k=ir,O=ar,F=fr,B=ur,Z=pr,P=sr,K=dr,X=lr,l=gr,o=Ur,i=br,d=vr,g=yr;return $(),Y(S(Wt),null,tr({default:x(()=>[E("div",wo,[E("div",Uo,[b(X,{shadow:"hover",class:"config-card"},{header:x(()=>[b(S(Xe),{icon:S(hr),title:""},null,8,["icon"])]),default:x(()=>[b(P,{"label-width":"auto",size:"default","label-position":"top"},{default:x(()=>[b(B,{label:" ID"},{help:x(()=>[...s[13]||(s[13]=[E("span",{class:"form-help"},"",-1)])]),default:x(()=>[b(F,{modelValue:S(u).taskId,"onUpdate:modelValue":s[0]||(s[0]=f=>S(u).taskId=f),placeholder:"task-123456"},{prefix:x(()=>[b(p,null,{default:x(()=>[b(S(cr))]),_:1})]),_:1},8,["modelValue"])]),_:1}),b(B,{label:" (MB)"},{default:x(()=>[b(Z,{modelValue:S(u).chunkSizeMB,"onUpdate:modelValue":s[1]||(s[1]=f=>S(u).chunkSizeMB=f),min:1,max:100,step:1,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),b(B,{label:""},{help:x(()=>[...s[14]||(s[14]=[E("span",{class:"form-help"},"",-1)])]),default:x(()=>[b(Z,{modelValue:S(u).parallelUploads,"onUpdate:modelValue":s[2]||(s[2]=f=>S(u).parallelUploads=f),min:1,max:10,step:1,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),b(B,{label:""},{help:x(()=>[...s[15]||(s[15]=[E("span",{class:"form-help"},"",-1)])]),default:x(()=>[b(Z,{modelValue:S(u).queueConcurrency,"onUpdate:modelValue":s[3]||(s[3]=f=>S(u).queueConcurrency=f),min:1,max:10,step:1,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),b(K),E("div",So,[s[16]||(s[16]=E("h4",{class:"summary-title"},"",-1)),E("div",Po,[b(S(Oe),{label:"",value:`${S(u).chunkSizeMB} MB`,layout:"horizontal"},null,8,["value"]),b(S(Oe),{label:"",value:`${S(u).parallelUploads} `,layout:"horizontal"},null,8,["value"]),b(S(Oe),{label:"",value:`${S(u).queueConcurrency} `,layout:"horizontal"},null,8,["value"])])])]),_:1})]),E("div",xo,[b(X,{shadow:"hover",class:"main-card"},{default:x(()=>[b(g,{modelValue:S(e),"onUpdate:modelValue":s[4]||(s[4]=f=>mr(e)?e.value=f:null),type:"card",class:"upload-tabs"},{default:x(()=>[b(d,{name:"queue"},{label:x(()=>[E("div",Eo,[b(p,null,{default:x(()=>[b(S(Pr))]),_:1}),s[17]||(s[17]=E("span",null,"",-1)),S(n).size>0?($(),Y(O,{key:0,value:S(n).size,max:99,class:"tab-badge"},null,8,["value"])):Q("",!0)])]),default:x(()=>[E("div",ko,[E("div",Oo,[b(l,{ref_key:"uploadRef",ref:r,drag:"",multiple:"","auto-upload":!1,"show-file-list":!1,"on-change":_,class:"upload-dragger"},{default:x(()=>[E("div",Ro,[b(p,{class:"upload-icon"},{default:x(()=>[b(S(_r))]),_:1}),s[21]||(s[21]=E("h3",{class:"upload-title"},"",-1)),s[22]||(s[22]=E("p",{class:"upload-subtitle"},"",-1)),E("div",Co,[E("div",jo,[b(p,null,{default:x(()=>[b(S(Re))]),_:1}),s[18]||(s[18]=E("span",null,"",-1))]),E("div",Ao,[b(p,null,{default:x(()=>[b(S(Re))]),_:1}),s[19]||(s[19]=E("span",null,"",-1))]),E("div",To,[b(p,null,{default:x(()=>[b(S(Re))]),_:1}),s[20]||(s[20]=E("span",null,"",-1))])])])]),_:1},512)]),S(n).size>0?($(),re("div",Lo,[b(S(Xe),{icon:S(nt),title:` (${S(n).size})`},null,8,["icon","title"]),b(i,{class:"queue-scrollbar"},{default:x(()=>[E("div",zo,[($(!0),re(ot,null,at(Array.from(S(n).values()),f=>($(),re("div",{key:f.id,class:it(["file-item",`status-${f.status}`])},[E("div",Io,[E("div",Fo,[b(p,{class:"file-icon",size:40},{default:x(()=>[b(S(wr))]),_:1}),E("div",{class:it(["status-indicator",f.status])},null,2)]),E("div",Do,[E("div",qo,[E("h4",{class:"file-name",title:f.file.name},J(f.file.name),9,Bo),b(S(Jt),{status:f.status,size:"small",effect:"plain"},null,8,["status"])]),E("div",$o,[E("span",No,J(S(Le)(f.file.size)),1),s[23]||(s[23]=E("span",{class:"meta-divider"},"",-1)),E("span",Ho,"ID: "+J(f.id),1)]),f.status==="uploading"?($(),re("div",Mo,[E("div",Go,[E("span",Vo,J(f.progress.toFixed(1))+"%",1),E("span",Ko,J(f.speed),1)]),b(o,{percentage:f.progress,"stroke-width":6,"show-text":!1,color:M},null,8,["percentage"])])):Q("",!0)]),E("div",Zo,[b(m,{size:"small"},{default:x(()=>[f.status==="waiting"?($(),Y(h,{key:0,type:"primary",onClick:C=>S(y)(f.id)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(Qe))]),_:1})]),_:1},8,["onClick"])):Q("",!0),f.status==="uploading"?($(),Y(h,{key:1,onClick:C=>S(U)(f.id)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(et))]),_:1})]),_:1},8,["onClick"])):Q("",!0),f.status==="paused"?($(),Y(h,{key:2,type:"success",onClick:C=>S(R)(f.id)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(tt))]),_:1})]),_:1},8,["onClick"])):Q("",!0),f.status==="error"?($(),Y(h,{key:3,type:"warning",onClick:C=>S(y)(f.id)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(Sr))]),_:1})]),_:1},8,["onClick"])):Q("",!0),b(h,{type:"danger",onClick:C=>S(z)(f.id)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(rt))]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])])],2))),128))])]),_:1})])):($(),Y(S(Ye),{key:1,icon:S(nt),description:""},null,8,["icon"]))])]),_:1}),b(d,{name:"history"},{label:x(()=>[E("div",Xo,[b(p,null,{default:x(()=>[b(S(Ce))]),_:1}),s[24]||(s[24]=E("span",null,"",-1)),S(a).length>0?($(),Y(O,{key:0,value:S(a).length,max:99,class:"tab-badge"},null,8,["value"])):Q("",!0)])]),default:x(()=>[E("div",Yo,[S(a).length>0?($(),Y(i,{key:0,class:"history-scrollbar"},{default:x(()=>[E("div",Wo,[($(!0),re(ot,null,at(S(a),f=>($(),re("div",{key:f.id,class:"history-item"},[E("div",Jo,[E("div",Qo,[b(p,{class:"success-icon",size:40},{default:x(()=>[b(S(xr))]),_:1})]),E("div",ea,[E("h4",{class:"history-name",title:f.fileName},J(f.fileName),9,ta),E("div",ra,[E("span",na,J(S(Le)(f.size)),1),s[25]||(s[25]=E("span",{class:"meta-divider"},"",-1)),E("span",oa,[b(p,null,{default:x(()=>[b(S(Ce))]),_:1}),W(" "+J(f.time),1)])])]),b(h,{type:"primary",size:"small",onClick:C=>S(L)(f.url)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(Er))]),_:1}),s[26]||(s[26]=W("  ",-1))]),_:1},8,["onClick"])])]))),128))])]),_:1})):($(),Y(S(Ye),{key:1,icon:S(Ce),description:""},null,8,["icon"]))])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:2},[S(n).size>0?{name:"toolbar",fn:x(()=>[E("div",vo,[E("div",go,[b(m,null,{default:x(()=>[b(h,{type:"primary",onClick:S(I)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(Qe))]),_:1}),s[5]||(s[5]=W("  ",-1))]),_:1},8,["onClick"]),b(h,{onClick:S(G)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(et))]),_:1}),s[6]||(s[6]=W("  ",-1))]),_:1},8,["onClick"]),b(h,{onClick:S(V)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(tt))]),_:1}),s[7]||(s[7]=W("  ",-1))]),_:1},8,["onClick"]),b(h,{type:"danger",onClick:S(j)},{default:x(()=>[b(p,null,{default:x(()=>[b(S(rt))]),_:1}),s[8]||(s[8]=W("  ",-1))]),_:1},8,["onClick"])]),_:1})]),E("div",_o,[E("div",bo,[b(O,{value:S(c).waiting,max:99,type:"info"},{default:x(()=>[b(k,null,{default:x(()=>[...s[9]||(s[9]=[W("",-1)])]),_:1})]),_:1},8,["value"]),b(O,{value:S(c).uploading,max:99,type:"success"},{default:x(()=>[b(k,{type:"success"},{default:x(()=>[...s[10]||(s[10]=[W("",-1)])]),_:1})]),_:1},8,["value"]),b(O,{value:S(c).paused,max:99,type:"warning"},{default:x(()=>[b(k,{type:"warning"},{default:x(()=>[...s[11]||(s[11]=[W("",-1)])]),_:1})]),_:1},8,["value"]),b(O,{value:S(c).error,max:99,type:"danger"},{default:x(()=>[b(k,{type:"danger"},{default:x(()=>[...s[12]||(s[12]=[W("",-1)])]),_:1})]),_:1},8,["value"])])])])]),key:"0"}:void 0]),1024)}}},ca=Rr(aa,[["__scopeId","data-v-da60ccf4"]]);export{ca as default};
